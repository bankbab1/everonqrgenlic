<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Everon License Generator</title>

  <style>
    * { box-sizing: border-box; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      background: #f2f2f7;
      min-height: 100vh;
      margin: 0;
      padding: env(safe-area-inset-top) 12px env(safe-area-inset-bottom);
      display: flex;
      justify-content: center;
    }

    .cards-wrapper {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 40px; 
    }


    /* ===== CARD ===== */
    .card {
      width: 100%;
      max-width: 520px;
      background: #ffffff;
      border-radius: 18px;
      padding: 22px 18px 24px;
      margin-top: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.12);
    }

    h2 {
      margin: 4px 0 20px;
      text-align: center;
      font-size: 18px;
      font-weight: 700;
      color: #111;
    }

    /* ===== FORM ===== */
    .field { margin-bottom: 16px; }

    label {
      font-size: 12px;
      font-weight: 600;
      color: #6e6e73;
      margin-bottom: 6px;
      display: block;
    }

    input, textarea {
      width: 100%;
      height: 48px;
      padding: 0 44px 0 14px;
      font-size: 15px;
      border-radius: 12px;
      border: 1px solid #d1d1d6;
      outline: none;
      background: #fff;
    }

    textarea {
      height: 96px;
      padding: 12px 14px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      resize: none;
    }

    input:focus, textarea:focus {
      border-color: #1c1c1c;
    }

    .hint {
      font-size: 11px;
      color: #8e8e93;
      margin-top: 6px;
    }

    /* ===== BUTTONS (ALL BLACK) ===== */
    .btn,
    .btn-copy,
    .modal button {
      width: 100%;
      height: 50px;
      border-radius: 14px;
      border: none;
      background: #1c1c1c;
      color: #ffffff;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
    }

    .btn-copy {
      height: 46px;
      font-size: 14px;
    }

    .btn:active,
    .btn-copy:active,
    .modal button:active {
      opacity: 0.85;
    }

    .copy-row {
      display: flex;
      gap: 12px;
      margin-top: 10px;
    }

    /* ===== SALT EYE ===== */
    .input-wrap { position: relative; }

    .eye-btn {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      padding: 6px;
      cursor: pointer;
      color: #8e8e93;
    }

    .eye-btn svg {
      width: 22px;
      height: 22px;
      stroke: currentColor;
    }

    /* ===== MODAL ===== */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.35);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .modal {
      width: 90%;
      max-width: 320px;
      background: #fff;
      border-radius: 16px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      animation: pop 0.2s ease;
    }

    @keyframes pop {
      from { transform: scale(0.96); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .modal h3 {
      margin: 0 0 6px;
      font-size: 16px;
      font-weight: 700;
      color: #111;
    }

    .modal p {
      margin: 0 0 16px;
      font-size: 14px;
      color: #555;
    }

    /* ===== DESKTOP ===== */
    @media (min-width: 768px) {
      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        align-items: center;
      }

      .card {
        margin-top: 0;
        padding: 26px 24px 28px;
      }
    }
  </style>
</head>
<body>
<div class="cards-wrapper">
<div class="card">
  <h2>üîë Everon License Generator</h2>

  <div class="field">
    <label>HW ID</label>
    <input id="hwid" placeholder="ASDD-SDD1-GJ32" oninput="this.value = this.value.toUpperCase()" />
  </div>

  <div class="field">
    <label>SALT</label>
    <div class="input-wrap">
      <input id="salt" type="password" placeholder="Enter secret salt" oninput="this.value = this.value.toUpperCase()" />
      <button class="eye-btn" type="button" onclick="toggleSalt()">
        <svg id="eyeIcon" viewBox="0 0 24 24" fill="none" stroke-width="2">
          <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"/>
          <circle cx="12" cy="12" r="3"/>
        </svg>
      </button>
    </div>
    <div class="hint">SALT is not stored or saved</div>
  </div>

  <button class="btn" onclick="generate()">Generate License</button>

  <div class="field" style="margin-top:16px;">
    <label>Generated License</label>
    <textarea id="output" readonly></textarea>

    <div class="copy-row">
      <button class="btn-copy" onclick="copyLicense()">Copy</button>
    </div>
  </div>
</div>
<div class="card">
  <h2>üì± IMEI Encode / Decode</h2>

  <div class="field">
    <label>IMEI (15 digits or encoded)</label>
    <input
      id="imeiInput"
      placeholder="356789012345678"
    />
  </div>

  <div class="field">
    <label>Secret</label>
    <div class="input-wrap">
      <input
        id="imeiSecret"
        type="password"
        placeholder="Enter secret"
        oninput="this.value = this.value.toUpperCase()"
      />
      <button class="eye-btn" type="button" onclick="toggleIMEISecret()">
        <svg id="eyeIconImei" viewBox="0 0 24 24" fill="none" stroke-width="2">
          <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"/>
          <circle cx="12" cy="12" r="3"/>
        </svg>
      </button>
    </div>
  </div>

  <div class="copy-row">
    <button class="btn-copy" onclick="encodeIMEI()">Encode</button>
    <button class="btn-copy" onclick="decodeIMEI()">Decode</button>
  </div>

  <div class="field" style="margin-top:16px;">
    <label>Result</label>
    <textarea id="imeiOutput" readonly></textarea>

    <div class="copy-row">
      <button class="btn-copy" onclick="copyIMEI()">Copy</button>
    </div>
  </div>
</div>

<div class="card">
  <h2>üè™ Customer Registration Code</h2>

  <button class="btn" onclick="generateCustomerReg()">
    Generate Registration Code
  </button>

  <div class="field" style="margin-top:16px;">
    <label>Registration Code</label>
    <textarea id="customerRegOutput" readonly></textarea>

    <div class="copy-row">
      <button class="btn-copy" onclick="copyCustomerReg()">Copy</button>
    </div>
  </div>

  <div class="hint">
    Format: EVxx-xxxx-xxxx (A‚ÄìZ, 0‚Äì9)
  </div>
</div>





<div class="card">
  <h2>üîë Registration Hash Generator</h2>

  <div class="field">
    <label>Registration Code</label>
    <input
      id="regPlain"
      placeholder="EVSS-WRJV-66TD"
      oninput="this.value = this.value.toUpperCase()"
    />
  </div>

  <div class="field">
    <label>SECRET</label>
    <div class="input-wrap">
      <input
        id="regSecret"
        type="password"
        placeholder="Enter secret"
        oninput="this.value = this.value.toUpperCase()"
      />
      <button class="eye-btn" type="button" onclick="toggleRegSecret()">
        <svg id="eyeIconReg" viewBox="0 0 24 24" fill="none" stroke-width="2">
          <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"/>
          <circle cx="12" cy="12" r="3"/>
        </svg>
      </button>
    </div>
    <div class="hint">
      Same SECRET must be used in Google Apps Script & EverOn app
    </div>
  </div>

  <button class="btn" onclick="generateRegHash()">Generate Hash</button>

  <div class="field" style="margin-top:16px;">
    <label>Registration Hash (Store this)</label>
    <textarea id="regHashOutput" readonly></textarea>

    <div class="copy-row">
      <button class="btn-copy" onclick="copyRegHash()">Copy</button>
    </div>
  </div>
</div>






</div>

<!-- MODAL -->
<div id="modal" class="modal-overlay" onclick="closeModal(event)">
  <div class="modal">
    <h3 id="modalTitle"></h3>
    <p id="modalMessage"></p>
    <button onclick="hideModal()">OK</button>
  </div>
</div>






<script>
  async function sha256(text) {
    const buf = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(text));
    return [...new Uint8Array(buf)].map(b => b.toString(16).padStart(2, "0")).join("");
  }

  function showModal(t, m) {
    modalTitle.textContent = t;
    modalMessage.textContent = m;
    modal.style.display = "flex";
  }

  function hideModal() { modal.style.display = "none"; }
  function closeModal(e) { if (e.target.id === "modal") hideModal(); }

  function toggleSalt() {
    const s = salt;
    eyeIcon.innerHTML = s.type === "password"
      ? '<path d="M1 1l22 22"/>'
      : '<path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"/><circle cx="12" cy="12" r="3"/>';
    s.type = s.type === "password" ? "text" : "password";
  }

  async function generate() {
    if (!hwid.value || !salt.value) {
      showModal("Missing information", "HW ID and SALT are required.");
      return;
    }
    output.value = await sha256(hwid.value + salt.value.toUpperCase());
  }

  function copyLicense() {
    if (!output.value) {
      showModal("Nothing to copy", "Generate a license first.");
      return;
    }
    navigator.clipboard.writeText(output.value).then(() =>
      showModal("Copied", "License copied to clipboard.")
    );
  }
</script>
<script>
  function toggleIMEISecret() {
    const s = imeiSecret;
    eyeIconImei.innerHTML = s.type === "password"
      ? '<path d="M1 1l22 22"/>'
      : '<path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"/><circle cx="12" cy="12" r="3"/>';
    s.type = s.type === "password" ? "text" : "password";
  }

  function encodeIMEI() {
    const imei = imeiInput.value.trim();
    const secret = imeiSecret.value.trim();

    if (!/^\d{15}$/.test(imei)) {
      showModal("Invalid IMEI", "IMEI must be exactly 15 digits.");
      return;
    }
    if (!secret) {
      showModal("Missing Secret", "Secret is required.");
      return;
    }

    const encoded = btoa(`${imei}:${secret}`);
    imeiOutput.value = encoded;
  }

  function decodeIMEI() {
    const encoded = imeiInput.value.trim();
    const secret = imeiSecret.value.trim();

    if (!encoded || !secret) {
      showModal("Missing data", "Encoded value and secret are required.");
      return;
    }

    try {
      const decoded = atob(encoded);
      if (!decoded.endsWith(":" + secret)) {
        showModal("Invalid Secret", "Secret does not match encoded data.");
        return;
      }

      imeiOutput.value = decoded.split(":")[0];
    } catch {
      showModal("Decode Failed", "Invalid encoded IMEI.");
    }
  }

  function copyIMEI() {
    if (!imeiOutput.value) {
      showModal("Nothing to copy", "No result available.");
      return;
    }
    navigator.clipboard.writeText(imeiOutput.value).then(() =>
      showModal("Copied", "Result copied to clipboard.")
    );
  }
</script>

<script>
  function randomChars(len) {
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    let out = "";
    for (let i = 0; i < len; i++) {
      out += chars[Math.floor(Math.random() * chars.length)];
    }
    return out;
  }

  function generateCustomerReg() {
    // EVxx-xxxx-xxxx
    const part1 = randomChars(2);
    const part2 = randomChars(4);
    const part3 = randomChars(4);

    const code = `EV${part1}-${part2}-${part3}`;
    customerRegOutput.value = code;
  }

  function copyCustomerReg() {
    if (!customerRegOutput.value) {
      showModal("Nothing to copy", "Generate a registration code first.");
      return;
    }

    navigator.clipboard.writeText(customerRegOutput.value).then(() =>
      showModal("Copied", "Customer registration code copied.")
    );
  }
</script>




<script>
  async function sha256(text) {
    const buf = await crypto.subtle.digest(
      "SHA-256",
      new TextEncoder().encode(text)
    );
    return [...new Uint8Array(buf)]
      .map(b => b.toString(16).padStart(2, "0"))
      .join("");
  }

  function toggleRegSecret() {
    const s = regSecret;
    eyeIconReg.innerHTML = s.type === "password"
      ? '<path d="M1 1l22 22"/>'
      : '<path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"/><circle cx="12" cy="12" r="3"/>';
    s.type = s.type === "password" ? "text" : "password";
  }

  async function generateRegHash() {
    const reg = regPlain.value.trim().toUpperCase();
    const secret = regSecret.value.trim().toUpperCase();

    if (!reg || !secret) {
      showModal("Missing Data", "Registration Code and SECRET are required.");
      return;
    }

    const hash = await sha256(reg + secret);
    regHashOutput.value = hash;

    showModal("Generated", "Registration hash generated successfully.");
  }

  function copyRegHash() {
    if (!regHashOutput.value) {
      showModal("Nothing to copy", "Generate a hash first.");
      return;
    }

    navigator.clipboard.writeText(regHashOutput.value).then(() =>
      showModal("Copied", "Registration hash copied.")
    );
  }
</script>


</body>
</html>
