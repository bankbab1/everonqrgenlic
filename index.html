<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Everon License Generator</title>

  <style>
    * { box-sizing: border-box; }

    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0;
      padding: 20px;
    }

    .card {
      width: 100%;
      max-width: 520px;
      background: #ffffff;
      border-radius: 16px;
      padding: 28px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.18);
    }

    h2 {
      margin: 0 0 24px;
      text-align: center;
      font-size: 20px;
      font-weight: 700;
      color: #1c1c1c;
    }

    .field { margin-bottom: 18px; }

    label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: #333;
      margin-bottom: 6px;
    }

    input, textarea {
      width: 100%;
      padding: 12px 44px 12px 14px;
      font-size: 14px;
      border-radius: 10px;
      border: 1px solid #ccc;
      outline: none;
    }

    input:focus, textarea:focus {
      border-color: #667eea;
    }

    textarea {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      resize: none;
      height: 96px;
      padding-right: 14px;
    }

    .hint {
      font-size: 12px;
      color: #777;
      margin-top: 6px;
    }

    .btn {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 12px;
      background: #1c1c1c;
      color: #ffffff;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
    }

    .btn:hover { background: #000; }

    .copy-row {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .btn-copy {
      flex: 1;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid #ccc;
      background: #f7f7f7;
      font-weight: 600;
      cursor: pointer;
    }

    .btn-copy:hover { background: #eaeaea; }

    /* SALT input + eye */
    .input-wrap { position: relative; }

    .eye-btn {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      cursor: pointer;
      padding: 4px;
      color: #666;
    }

    .eye-btn:hover { color: #000; }

    .eye-btn svg {
      width: 20px;
      height: 20px;
      stroke: currentColor;
    }

    /* MODAL */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .modal {
      width: 90%;
      max-width: 360px;
      background: #fff;
      border-radius: 14px;
      padding: 22px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      animation: pop 0.2s ease;
    }

    @keyframes pop {
      from { transform: scale(0.95); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .modal h3 {
      margin: 0 0 8px;
      font-size: 16px;
      font-weight: 700;
      color: #1c1c1c;
    }

    .modal p {
      margin: 0 0 18px;
      font-size: 13px;
      color: #555;
    }

    .modal button {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: none;
      background: #1c1c1c;
      color: #fff;
      font-weight: 700;
      cursor: pointer;
    }

    .modal button:hover { background: #000; }
  </style>
</head>
<body>

<div class="card">
  <h2>ðŸ”‘ Everon License Generator</h2>

  <div class="field">
    <label>HW ID</label>
    <input id="hwid" placeholder="ASDD-SDD1-GJ32" oninput="this.value = this.value.toUpperCase()" />
  </div>

  <div class="field">
    <label>SALT (manual input)</label>
    <div class="input-wrap">
      <input id="salt" type="password" placeholder="Enter secret salt" oninput="this.value = this.value.toUpperCase()" />
      <button class="eye-btn" type="button" onclick="toggleSalt()">
        <svg id="eyeIcon" viewBox="0 0 24 24" fill="none" stroke-width="2">
          <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"/>
          <circle cx="12" cy="12" r="3"/>
        </svg>
      </button>
    </div>
    <div class="hint">SALT is not stored or saved</div>
  </div>

  <button class="btn" onclick="generate()">Generate License</button>

  <div class="field" style="margin-top:20px;">
    <label>Generated License (SHA-256)</label>
    <textarea id="output" readonly></textarea>

    <div class="copy-row">
      <button class="btn-copy" onclick="copyLicense()">ðŸ“‹ Copy License</button>
    </div>
  </div>
</div>

<!-- MODAL -->
<div id="modal" class="modal-overlay" onclick="closeModal(event)">
  <div class="modal">
    <h3 id="modalTitle"></h3>
    <p id="modalMessage"></p>
    <button onclick="hideModal()">OK</button>
  </div>
</div>

<script>
  async function sha256(text) {
    const data = new TextEncoder().encode(text);
    const hashBuffer = await crypto.subtle.digest("SHA-256", data);
    return Array.from(new Uint8Array(hashBuffer))
      .map(b => b.toString(16).padStart(2, "0"))
      .join("");
  }

  function showModal(title, message) {
    document.getElementById("modalTitle").textContent = title;
    document.getElementById("modalMessage").textContent = message;
    document.getElementById("modal").style.display = "flex";
  }

  function hideModal() {
    document.getElementById("modal").style.display = "none";
  }

  function closeModal(e) {
    if (e.target.id === "modal") hideModal();
  }

  function toggleSalt() {
    const input = document.getElementById("salt");
    const icon = document.getElementById("eyeIcon");

    if (input.type === "password") {
      input.type = "text";
      icon.innerHTML = `<path d="M1 1l22 22"/>`;
    } else {
      input.type = "password";
      icon.innerHTML = `
        <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"/>
        <circle cx="12" cy="12" r="3"/>
      `;
    }
  }

  async function generate() {
    const hwid = document.getElementById("hwid").value.trim();
    const salt = document.getElementById("salt").value.trim().toUpperCase();

    if (!hwid || !salt) {
      showModal("Missing information", "HW ID and SALT are required.");
      return;
    }

    const license = await sha256(hwid + salt);
    document.getElementById("output").value = license;
  }

  function copyLicense() {
    const out = document.getElementById("output");
    if (!out.value) {
      showModal("Nothing to copy", "Please generate a license first.");
      return;
    }

    navigator.clipboard.writeText(out.value).then(() => {
      showModal("Copied", "License copied to clipboard.");
    });
  }
</script>

</body>
</html>
